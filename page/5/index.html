<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>pysnow530 的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="鲁迅曰过，好记性不如烂笔头子。">
<meta property="og:type" content="website">
<meta property="og:title" content="pysnow530 的博客">
<meta property="og:url" content="https://pysnow530.github.io/page/5/index.html">
<meta property="og:site_name" content="pysnow530 的博客">
<meta property="og:description" content="鲁迅曰过，好记性不如烂笔头子。">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="pysnow530@163.com">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="pysnow530 的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">pysnow530 的博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">不要踩坏我的圆</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://pysnow530.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-python-round-excel-data" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/04/python-round-excel-data/" class="article-date">
  <time datetime="2017-04-03T16:00:00.000Z" itemprop="datePublished">2017-04-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/04/python-round-excel-data/">唠唠python(8) -- 使用脚本代替手工数据操作</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这个问题已经过了很多天了，都记不太清细节了。</p>
<p>先捋一捋我们的需求。</p>
<h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p><img src="/public/img/post/bom.png" alt="待处理表格"></p>
<p>这个表格有点熟悉，好像在之前的文章里看到过。我们还是以它为例子。</p>
<p>我们有一张如上的物料订单表格。每两行对应一种物料，即需要的料数和订购的料数。不同的列对应不同时期需要的物料数量。</p>
<p>因为供应商提供给我们的物料都是以10000为单位的，所以就算我们只需要9颗料，也要订购10000颗料。也就是以10000为单位，对料数上取整。</p>
<p>我们看到其中有一些表格的数量是红颜色，它表示这些数据已经被手工填写了。每个单元格的料数以10000为单位上取整后，被填入它下面的一个单元格。</p>
<h2 id="计算公式"><a href="#计算公式" class="headerlink" title="计算公式"></a>计算公式</h2><p>我们在之前的文章里已经给出了订单数量的计算公式：<code>(n+10000-1) / 10000 * 10000</code>，其中n为需要的实际数量。</p>
<h2 id="功能清单"><a href="#功能清单" class="headerlink" title="功能清单"></a>功能清单</h2><p>我们列一下需要的功能清单：</p>
<ol>
<li>打开或保存excel文件</li>
<li>读取或写入单元格</li>
</ol>
<p>再不需要其它的功能了。</p>
<p>上一篇讲到的<code>openpyxl</code>很好地实现了我们需要的这些功能。</p>
<p>打开excel使用<code>workbook = openpyxl.load_workbook(&quot;excel文件位置&quot;)</code>，保存使用<code>workbook.save(&quot;保存到的路径&quot;)</code>。</p>
<p>读取某个单元格使用<code>print sheet[&quot;B5&quot;].value</code>，写入某个单元格使用<code>sheet[&quot;B5&quot;] = 30000</code>。其中<code>sheet</code>是我们使用<code>workbook.active</code>获取的工作簿里的第一张表格。</p>
<h2 id="几点逻辑"><a href="#几点逻辑" class="headerlink" title="几点逻辑"></a>几点逻辑</h2><p>我们需要对上面的表格中，I3到S28的奇数行数据查看一遍，还需要根据单元格的内容和它下面一个单元格的内容来判断是否需要处理单元格数据。</p>
<p>挨个查看一遍我们会用到一个这样的语句：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> range(<span class="number">3</span>, <span class="number">30</span>, <span class="number">2</span>):</span><br><span class="line">    处理row行数据</span><br></pre></td></tr></table></figure>

<p>这条语句的意思是，row分别等于3到28（不包含28）的奇数，然后依次执行下面的语句。后面的2是说，从3开始，取相隔为2的数。</p>
<p>这里有一点需要注意，我们的行号是数字表示的，但是列号是字母，我们需要先把字母转换成数字，在处理每一列时，再把数字转换成字母。庆幸的是，python已为我们准备好这些了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> range(<span class="number">3</span>, <span class="number">30</span>, <span class="number">2</span>):</span><br><span class="line">    <span class="keyword">for</span> col <span class="keyword">in</span> range(ord(<span class="string">"I"</span>), ord(<span class="string">"U"</span>)+<span class="number">1</span>, <span class="number">1</span>):</span><br><span class="line">        col_char = chr(col)</span><br><span class="line">        处理(row, col_char)单元格数据</span><br></pre></td></tr></table></figure>

<p><code>ord()</code>是将一个字母转化为数字，<code>chr()</code>是将数字转化回字母。注意我们给ord(“U”)加了一个1，因为ord(“U”)是不包含U的。我们再一次与python的作者来了一场完美的合作。</p>
<p>判断是否需要处理单元格，我们可以使用下面这条语句：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> sheet[<span class="string">"I3"</span>].value <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> sheet[<span class="string">"I4"</span>].value <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">    处理I3单元格</span><br></pre></td></tr></table></figure>

<p>意思也很好懂，翻译过来就是，如果I3单元格不是空的，并且它下面的I4单元格是空的，我们就处理I3单元格，并将处理结果填充到I4单元格。</p>
<h2 id="实现脚本"><a href="#实现脚本" class="headerlink" title="实现脚本"></a>实现脚本</h2><p>说了这么多，其实脚本已经差不多了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> openpyxl</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">workbook = openpyxl.load_workbook(<span class="string">"a.xlsx"</span>)</span><br><span class="line">sheet = workbook.active</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">count_bill</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> (n+<span class="number">10000</span><span class="number">-1</span>) / <span class="number">10000</span> * <span class="number">10000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> range(<span class="number">3</span>, <span class="number">30</span>, <span class="number">2</span>):</span><br><span class="line">    <span class="keyword">for</span> col <span class="keyword">in</span> range(ord(<span class="string">"I"</span>), ord(<span class="string">"U"</span>)+<span class="number">1</span>, <span class="number">1</span>):</span><br><span class="line">        col_char = chr(col)</span><br><span class="line"></span><br><span class="line">        cell_src_idx = col_char + str(row)</span><br><span class="line">        cell_dst_idx = col_char + str(row + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (sheet[cell_src_idx].value <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span></span><br><span class="line">                sheet[cell_dst_idx].value <span class="keyword">is</span> <span class="literal">None</span>):</span><br><span class="line">            n = int(sheet[cell_src_idx].value)</span><br><span class="line">            sheet[cell_dst_idx] = count_bill(n)</span><br><span class="line"></span><br><span class="line">sheet.save(<span class="string">"b.xlsx"</span>)</span><br></pre></td></tr></table></figure>

<p>14行代码，就实现了我们的需求。它读取当前目录下的a.xlsx文件，并根据我们之前所说的规则，处理指定范围内的表格数据，并将处理后的结果保存到一个新文件b.xlsx。</p>
<p>它真正将我们从枯燥无味的繁重工作中解放了出来，终于可以安心地睡个好觉了。</p>
<h2 id="更好的脚本"><a href="#更好的脚本" class="headerlink" title="更好的脚本"></a>更好的脚本</h2><p>当然，它还不够好，我们在这篇文章里不打算再把它变得更好，因为这个过程是很漫长的。但是它现在已经能帮我们节省比付出多几十倍甚至几百倍的时间。</p>
<p>它不够好，还能做怎么样的改进呢？</p>
<p>第一，里面全是代码，代码相对于人类自己的语言来说总没那么直观，毕竟我们是在迁就计算机嘛。</p>
<p>第二，每次执行时都要修改代码（输入输出文件名和单元格范围），十分之不友好。我们希望它可以让我们通过文件选择框选择某个文件，然后用鼠标拖选出我们要处理的范围，并询问我们要保存到哪个文件。</p>
<p>以上两点是显而易见的，特别是第二点。</p>
<p>不过最紧急的事情完成了，这个脚本已经可以帮我们节省下大量时间，以实现我们上面所说的改进了。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>终于把处理表格的傻逼工作交接给了计算机，可以舒一口气了。</p>
<p>为了不加重我们的心理负担，文章里有很多地方只是一带而过。至少对现在这个阶段来说，不需要知道的东西都是不重要的。如果哪里感到困惑，恭喜，这说明我们并不满足现状，想要一个更清晰的结果。</p>
<p>下一篇，我们先不急着改进上面说的两点不足，它们已经不那么紧急了，我们先来回顾一下之前提到的内容，并重新整理一下知识结构，让他们形成一个清晰的脉络，以便为以后装逼打下坚实的基础。</p>
<p><img src="/public/img/post/venation.jpg" alt="叶脉"></p>
<h2 id="碎碎念"><a href="#碎碎念" class="headerlink" title="碎碎念"></a>碎碎念</h2><p>零零散散地终于把这个脚本完成了，是时候回过头来梳理一下了。</p>
<p>跟<a href="http://jinguoliang.github.io/" target="_blank" rel="noopener">小金</a>约定，两天或两天以上的假期，每天一篇文章，失约100红包。本是想逼迫自己，竟然有时候写的不易乐乎，到了凌晨2、3点钟还在想读者会不会读懂这句话在说什么。</p>
<p>作者从读者的角度思考，读者又反过来从作者的角度思考，想想真的是一件很有趣的事情。</p>
<p>不得不说，写作的过程很快乐，虽然可能没有什么人看，但它至少已经帮助到了我。希望可以尽自己的一点微薄之力，让碰巧看到的人能生活得更轻松。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://pysnow530.github.io/2017/04/04/python-round-excel-data/" data-id="cle4am4je00286jiydk7p3zlf" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-python-package" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/03/python-package/" class="article-date">
  <time datetime="2017-04-02T16:00:00.000Z" itemprop="datePublished">2017-04-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/03/python-package/">唠唠python(7) -- 包</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这是我们打基础的最后一节。下一节，我们就来兑现之前许下的承诺，用脚本来实现表格的自动处理。</p>
<h2 id="包"><a href="#包" class="headerlink" title="包"></a>包</h2><p>这里所说的包就是《你的背包》的包，是对背包概念的一种模拟。</p>
<p>这两天小郭去武汉玩，为了途中更方便一点，我就把我的背包给她用了（其实是我一直在用她的背包😁）。我担心公司有一些事务要处理，所以一直都保持着背笔记本回家的习惯。最近几天都是手拿笔记本，十分的不方便。</p>
<p>所以你看，包还是很重要的。</p>
<p>我们一般会把一些平时经常用到的物品放到书包，如果我们有多个包，则会把同类物品放到同个包。比如我们把纸笔放进背包里，只要背着这个背包出去，就可以在需要的时候写字了，而且背在肩上很方便。</p>
<p>python里的包也是类似的用途。</p>
<h2 id="python中的包"><a href="#python中的包" class="headerlink" title="python中的包"></a>python中的包</h2><p>互联网的兴起，让全球的人都可以有机会合作，大大提高了人们的工作效率。</p>
<p>实际上，python中的包还有另外一个异常重要的作用：复用。比如，我们之前说的表格处理的例子，世界上有很大一部分人都会用到表格处理的功能，如果大家每人做一套工具来操作表格（比如读取或写入表格中的某个单元格），成本很高，不利于人类知识的叠加。有句话叫站在巨人的肩膀上，说得很有道理。</p>
<p>那怎么做呢？</p>
<p>把我们的功能合集打个包，而且只把人们要用的东西提供出来。举个例子，我们要读取某个单元格的数据（比如我们要读取B5单元格的数据），只需要<code>sheet[&quot;B5&quot;].value</code>就可以了，具体怎么获取的，交给那个精通表格文件处理的人就可以了，我们不需要理会。</p>
<p>背包很好理解，但python中的包听起来就有点玄乎了。python中的包到底是什么东西呢？或者说，它的外在表现是什么呢？</p>
<p>我们之前把洗衣服的操作封装成一台洗衣机，叫做功能。又把人的说学逗唱的功能和人的姓名等属性封装成一个人类的概念，叫做类。包其实就是一个功能和类的合集，也就是说，它里面既包含有功能，又包含有类。说白了，其实就是把我们之前所有的代码放到一块。</p>
<h2 id="使用包"><a href="#使用包" class="headerlink" title="使用包"></a>使用包</h2><p>之前我们讨论类的时候，自己亲自写了一个类来更深入的体会类的概念。</p>
<p>现在我们使用包，再来亲自手写一个包？</p>
<p>这次我们不写了，我们之前谈到封装，其实就是把细节隐藏起来，而让一个东西更好用。比如一台洗衣机，我们只需要学会按按键就可以了。如果我们读了洗衣机的使用说明还不知道洗衣机怎么用，只能说这台洗衣机做得太烂了，或者说交互太差了。</p>
<p>我们直接来使用一个包体验一下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">print</span> os.name</span><br></pre></td></tr></table></figure>

<p>执行上面两条命令后，会显示当前系统的名称。如在mac下，会显示”posix”。它是怎么获取的，我们并不关心，只要返回的名称正确，我们就认为，嗯，小伙子干得不错。</p>
<p><code>import</code>意思是使用，我们请求使用os包，并要求显示我们os的name。</p>
<h2 id="读取表格文件"><a href="#读取表格文件" class="headerlink" title="读取表格文件"></a>读取表格文件</h2><p>我们已经来到了这里：读取表格文件。</p>
<p>只要能用语言精确表达出来的功能，大部分都很简单，而且非常有可能已被其他人实现了。表格处理就是这样。</p>
<p>现在有一个问题，既然这个包有可能已经被实现了，那我们怎么获取这个包呢？</p>
<p>我们知道肯定不止一个包可以做这种操作。一般我们会在网上搜索大量资料，然后对比选取符合我们需求的包。</p>
<p>假设我们已经阅读并对比了大量资料，发现了一个可以读写表格文件的库，叫做<code>openpyxl</code>。</p>
<p>现在我们要准备安装这个包了。这是一个最好的时代，只要确定了使用哪个包，安装极其简单，我们甚至都不用关心去哪里下载，下载完成后要做什么，它会不会依赖其它的包，等等等等这些问题。python已为我们准备好了安装的方式。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip install openpyxl</span><br></pre></td></tr></table></figure>

<p>是的，就是这么一条简单的命令。然后稍许的等待，这个包就安装成功了。真的方便极了，美好的东西总能让我们心情愉快。我们甚至也不用关心它被安装到了哪，直接用就可以了。</p>
<p>想想如果我们用表格处理软件查看B5单元格的数据。先打开目标表格文件，然后翻到第一张表格（一个表格文件对应一个工作簿，里面可能有多张表格），找到B5单元格，并查看内容。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> openpyxl</span><br><span class="line"></span><br><span class="line">workbook = openpyxl.load_workbook(<span class="string">'a.xlsx'</span>)</span><br><span class="line">sheet = workbook.active</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> sheet[<span class="string">"B5"</span>].value</span><br></pre></td></tr></table></figure>

<p>就这么简单的几行，就把<code>B5</code>单元格的内容显示出来了。</p>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>现在我们已经可以获取表格中的某个单元格了，写入跟获取是同样简单的。下一篇我们来看如何写入，以及如何来实现我们之前的物料取整问题。</p>
<p>终于可以不用对着成百上千的数据心力交瘁，提心吊胆了。可以有更多时间喝咖啡了。想想好激动。</p>
<h2 id="碎碎念"><a href="#碎碎念" class="headerlink" title="碎碎念"></a>碎碎念</h2><p>晚上9点30，写完了，可以去吃饭了，哈哈。</p>
<p>老板来一个煎饼果子，一盒水果，一个鸡腿。街边小吃让人愉悦。</p>
<p>想起申总的一句话：不吃街边小吃的人，不知道要丧失多少乐趣。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://pysnow530.github.io/2017/04/03/python-package/" data-id="cle4am4jd00256jiygzzecec9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-big-idiot" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/02/big-idiot/" class="article-date">
  <time datetime="2017-04-01T16:00:00.000Z" itemprop="datePublished">2017-04-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/02/big-idiot/">读《巨婴国》</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>读完这本书已经有两个月了。其间恰好碰上过年，我回到山东老家，冬天冰冷的雪夜里，或是乍暖还寒的清晨，看着捧在光下发黄的屏幕，别有一番滋味。</p>
<p><img src="/public/img/post/big-idiot.jpeg" alt="巨婴国封面"></p>
<p>第一次看到封面上奇形怪状的小人时，以为是一本漫画书。这本书读起来很轻松，思考起来又有点沉重。</p>
<p>书中有很多很有意思的观点，比如谈到“普遍缺席的父亲”，“把儿子视为权利争夺战筹码的母亲”。我对这些并不感冒，我的父母给了我足够的爱与自由。</p>
<p>我感触最深的一点，是讲到“中国式好人”。武志红说他自己就是一个典型的“中国式好人”，可能大部分人读到都会产生共鸣吧，毕竟“中国式的好人”占了绝大多数，因为有集体主义在压着。</p>
<p>我们总是有意无意地被灌输集体主义的思想，一切为了集体，要牺牲小我成就大我。这其实就是在压制自己，因为自私是人的天性。</p>
<p>从达尔文的进化论来看，生物的进化，靠的是物竞天择，而不同物种如何竞争？</p>
<p>我们在初中时就已经知道了，即使是单细胞生物，也懂得“趋利避害”的道理。当然，说懂得是过分了，它们不用懂得，竞争会把基因里存在“趋利避害”特性的物种筛选出来。</p>
<p>我身边有很多人，包括过去的我，都不好意思为自己争取利益，唯恐被人说闲话，或者自己道德上过不去。</p>
<p>书中也提到一个原因，如果我们把自己的某部分毁掉，比如我们不为自己争取利益，那我们就站在了道德的制高点，“我把本属于自己的一部分都不要了，你还怎么来指责我？”但越是打压自己的天性，我们的能量就会变得越萎缩。</p>
<p>不自私的人还容易碰到的一个问题是，述情障碍。我们接受的教育是，个人要服从集体，这导致我们很难感受到自己的感觉。自私的人是坏的，是可耻的。所以我们拒绝自己自私的部分，我们不想让自己的那部分阴暗被别人看到，被拒绝的部分就陷入了黑暗。</p>
<p>“中国式好人”不懂得拒绝。一切为了他人，导致自己最后活得很累。而且情况往往是，我们一边帮助他人，一边却又在抱怨，因为我们并不是因为感觉到了他们的困难，而是集体主义教导我们要帮助他人，不然自己就太自私了。</p>
<p>“中国式好人”没有自己的个性。个性是对集体的背叛，在一个以集体为生活单位的环境下，被集体排斥是很恐怖的一件事情。所以很多人为了融入集体，干脆泯灭了自己的个性。</p>
<p>自私是个好东西。只有能充分感知到自己的感受，我们才能对别人的处境感同身受，也才能真正发自内心地想去帮助他人。</p>
<p>自私对公司的管理一样有很大的好处。吴军在讲到公司管理时引入了一个数学概念，我觉得很好，叫做“利益最大化函数”，即我们将公司的发展与员工的利益绑定，员工为自己获得最大利益的同时，也可以为公司做出最大的产出。但是，如果一群人都是一群集体主义下催生的僵尸，没有感情，没有创意，打一鞭子就动一动，这样的人，做出的产出能有多少？</p>
<p>“老油条”应该就是这么来的吧？</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://pysnow530.github.io/2017/04/02/big-idiot/" data-id="cle4am4im00046jiye06v7ycg" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%98%85%E8%AF%BB/" rel="tag">阅读</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-the-art-of-readable-code" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/29/the-art-of-readable-code/" class="article-date">
  <time datetime="2017-03-28T16:00:00.000Z" itemprop="datePublished">2017-03-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/29/the-art-of-readable-code/">读《编写可读代码的艺术》</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>感谢公司的图书角，让我免费读到了这样一本好书。</p>
<p>用kindle已经有一段时间了，也陆陆续续地在上面买了一些电子书。但慢慢地发现，还是读纸质书来得舒服，翻起来也方便。当然，最好是自己买的书，可圈可点，不喜欢的书还可以拿来擦屁股。</p>
<p>然后我就联想到了李敖的读书秘诀，给大家摘一段体会一下：</p>
<blockquote>
<p>我李敖看的书很少会忘掉，什么原因呢？方法好。什么方法？心狠手辣。剪刀美工刀全部用到，把书给分尸掉了，就是切开了。这一页我需要，这一段我需要，我把它按类别分开来。那背面有用怎么办呢？把它影印出来，或者一开始就买两本书，把两本书都切开以后整理出来，把要看的部分分类留存。结果一本书看完了，这本书也被分尸掉了。这就是我的看书方法。</p>
</blockquote>
<p>虽然有点偏激，但至少说明，读书要活读，要跟书互动，产生参与感，还要温故知新，常翻常新。纸质书可以做到，电子书总归不那么方便。</p>
<p>《编写可读代码的艺术》，一个书名就已经道出了它接下来的目标了。谈到艺术，大多时候是从微小处着眼，细细体味，而非一个hello world那么简单。有生活，有哲学，代码也该像一件精心雕琢的艺术品。</p>
<p>这本书的结构已经非常清晰了，再做总结总显啰嗦。下面是我读这本书时想到的，并非笔记。</p>
<h2 id="想人所想"><a href="#想人所想" class="headerlink" title="想人所想"></a>想人所想</h2><p>这个标题看起来一点都不酷，但是做起来甚至会感动到我们自己。我们不想看到队友因为看不懂代码而苦恼的样子，我们的用户已经疲惫不堪，我们不想让他们再承受着蹩脚的使用体验。</p>
<p>写代码和写文章是极其类似的，作者要站在读者的角度思考问题。</p>
<p>读者读到这个词时是否会理解它，会不会产生歧义，是否需要了解某个背景，这段话是不是多余，会不会太啰嗦。</p>
<p>作者要思考比读者多得多的东西，因为作者这个角色本身，是包含了读者角色的双重角色。</p>
<p>站在再高一点，从系统用户的视角来看，这个字段的描述用户是否能看懂，是否正确理解了它的用途，有没有必要填写，用户是否可直观地了解有哪些注意事项，是否知道在做什么，当用户看到这个提示时是否知道它在说什么，blahblahblah一大坨，慢慢体会。</p>
<p>我们即是作者，又是读者；即是开发者，又是维护者；即是产品，又是用户。</p>
<h2 id="遵循惯例"><a href="#遵循惯例" class="headerlink" title="遵循惯例"></a>遵循惯例</h2><p>遵循惯例可以看作是“想人所想”的一部分。</p>
<p>每个行业都有自己的惯例。伴随着行业的发展，大家在相互配合中，整理出了一些行之有效的通用规则。</p>
<p>理想的情况是，这些通用规则，本行业的人，大家耳熟能详。</p>
<p>既然大家耳熟能详，就很少存在误解，也可能更好地被理解。这无疑对读者更友好。</p>
<p>当然，惯例也有可能带来相反的效果。《编写可读代码的艺术》里提到过一个例子，<code>get_xxx()</code>按惯例来说就该是O(1)复杂度的函数，该书作者坚信这一点，结果该函数并非O(1)函数，导致作者在优化速度时吃了点苦头。</p>
<p>不过就像爱情一样，惯例是有的，你坚信，准没错，至少它能保证你在80%的情况下是正确的。这很值。</p>
<h2 id="讲究卫生"><a href="#讲究卫生" class="headerlink" title="讲究卫生"></a>讲究卫生</h2><p>一张干净的脸总是讨人喜欢的。</p>
<p>记得小时候家里不富裕，还穿过打补丁的裤子。老师教导我们，裤子破了打补丁很正常，但即使打了补丁，也要把裤子洗干净。一个漂亮的补丁，甚至会给一条旧裤子增色，就是这样。</p>
<p>在我的理解里，讲究卫生意味着整洁和干净。注意变量的出场顺序，把相关的代码或变量分块，都是一些好习惯。</p>
<p>好的代码就是要看上去赏心悦目。</p>
<p>可能有的人觉得，只要让系统运行起来就万事大吉了，很明显，这是不负责任。</p>
<p>我维护过一些系统，杂乱且无用的旧代码像战场上的残骸，任性的空格空行天马行空放荡不羁，拷贝的痕迹随处可见。这些都会加重读者的心理负担。</p>
<p>当然，我们也有能力写出这样的代码，所以，可以安静下来想想，怎么对待自己。</p>
<h2 id="提升技能"><a href="#提升技能" class="headerlink" title="提升技能"></a>提升技能</h2><p>书中提到一点我觉得很受用：偶尔地翻一下语言内置的和常用的第三方库。</p>
<p>维护代码需要很大成本，甚至我们的大部分时间都是在做维护的工作。以我之前做的“代码发布系统”为例，开发用了一个月，后期的维护已经达到8个月之久，而且还会持续下去。</p>
<p>而大部分第三方库都已经过严格测试，而且可以节约我们的维护成本。</p>
<p>有的程序员喜欢重造轮子，出于学习目的或现存库不能满足需求还好，如果是为技术而技术，可要在关键时刻提醒一下自己啰。</p>
<h2 id="屏蔽细节"><a href="#屏蔽细节" class="headerlink" title="屏蔽细节"></a>屏蔽细节</h2><p>最后一点同样重要，帮助我们的读者隐藏不必要的细节。</p>
<p>函数的一个好处是，它把繁杂的上下文剥离开，让理解变得简单。比如，<code>send_mail_html(mail_address, html)</code>这个函数可以给指定邮箱地址发送一段html类型的文本，只要函数封装地够好，用户或主调函数无需关心它的实现细节。</p>
<p>这也是自下而上编码的好处，上层提供了比下层更高一级的操作接口，并为用户屏蔽下层的实现细节。从这个意义上来说，编程语言也是自下而上中的一层实现，语言的细节我们无需关心，只要它封装地够好且使用无歧义。</p>
<p>再往大了说，一个好的团队也应该有屏蔽彼此细节的能力，团队中的成员由不同的领域专家组成，大家的职责彼此正交。这时，如果你是一个虚拟化技术的专家，而我更擅长用系统来为大家提供帮助，如果我的系统需要申请一个临时环境，调用你的一个接口，我可以获得一个可用的ip，你怎么生成这个环境我不关心，我怎么用你也不用关心。再这时，如果我们要改变容器的管理方式，这对我们的用户是透明的，也就是说，他们甚至都不知道我们在做这一操作，用户只需关心他们所应关心的内容即可。</p>
<p>函数的使用亦如是，彼此一体却又边界清晰。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>编码如是，生活亦如是。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://pysnow530.github.io/2017/03/29/the-art-of-readable-code/" data-id="cle4am4jo003e6jiy3z57csps" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%98%85%E8%AF%BB/" rel="tag">阅读</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-python-class" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/25/python-class/" class="article-date">
  <time datetime="2017-03-24T16:00:00.000Z" itemprop="datePublished">2017-03-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/25/python-class/">唠唠python(6) -- 事物的边界和内在</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>上一篇文章，我们讲到可以将一批操作打包成一个“功能”，从而屏蔽其内部实现的细节。</p>
</blockquote>
<blockquote>
<p>这篇文章，我们将对屏蔽细节做出进一步的努力，并让计算机的世界更符合我们的直观感受。</p>
</blockquote>
<h2 id="边界的重要性"><a href="#边界的重要性" class="headerlink" title="边界的重要性"></a>边界的重要性</h2><p>昨天走在街上，看到一只动物，长得个绵羊样，体型却小得多。想起之前看到狗伪装成熊猫的样子，我就在心想，这可能也是一只演技派超强的狗。</p>
<p>在平日里，我们会有意无意地对看到的事物进行分类，这有很多好处。</p>
<p>首先，它能减少我们大脑的记忆量，屏蔽具体事物的一些不必要的细节。比如，我们现在肚子很饿，想吃点东西。我们发现路边有一个服装店，正常的人类，不用走进去就知道，里面没有我们急需的东西：食物。</p>
<p>其次，分类可以帮助我们更快地认识新事物。迎面奔来一只恶狠狠地狗，经验告诉我们，狗是会咬人的。所以，我们远远地躲开了它。狗喜欢骨头，喜欢吃屎，只要是一只狗，就可以对它的这些行为做出判断。</p>
<p>既然分类这么重要，如何进行分类呢？</p>
<p>凭直觉，可以。我们长这么大，没吃过猪肉也见过猪上树，看到长得像猪，八成就是猪了。</p>
<p>当然，凭直觉有时不那么灵。我就没凭直觉一眼看出那只迷你小绵羊其实是一只狗，而且直觉不方便数字化，我们无法直观地向计算机描述我们的直觉。</p>
<p>所以，除了直觉，我们应该还有其它的分类方法。</p>
<p>我们可以通过事物之间可识别的独特区别来区分事物，也就是通过事物之间的边界。比如，男人有鸡鸡，而女人没有，只要检查一下一个人有没有鸡鸡，就能判断他是个男人还是女人了。只要交给计算机这条规则，计算机也能很容易地判断一个人的性别了。当然，反之亦然，我们猥琐地猜想眼前的这个男人是有鸡鸡的。</p>
<h2 id="划分边界"><a href="#划分边界" class="headerlink" title="划分边界"></a>划分边界</h2><p>我们平时接触最多的是人，叫做“人类”。我们就以人为例，来想一下我们“人类”的一些事情。</p>
<p>首先，人有名字，有出生年月，有属于一个人具体的属性。</p>
<p>其次，我们知道，人可以说话，可以写字，可以吃喝拉撒。我们可以把这些看作一个人所具有的“功能”。这里的功能，其实就是我们上一篇所说的“功能”。比如，吃可能是由一系列的动作组成的，把食物塞到嘴里，咀嚼，下咽，blahblah…一系列的动作，我们把它们打包成一个功能，就叫做“吃”。</p>
<p>再次，当我们说“人类”的时候，实际上，我们在说的是一个概念，一个通过边界区分出来的分类，而并非特指老王。而当我们讨论老王的时候，我们就有了更具体的信息，我们不仅知道他有名字，还知道他叫“老王”，而且知道他出生于1962年（这让我们觉得“老”字合情合理）。很有意思的一点是，我们之前说的吃喝拉撒，老王全会，而且做起来跟其他人差别不大（不像名字那样千差万别）。老王就是人类具体化后的一个对象。</p>
<h2 id="介绍隔壁老王"><a href="#介绍隔壁老王" class="headerlink" title="介绍隔壁老王"></a>介绍隔壁老王</h2><p>现在我们知道了更多隔壁老王的秘密，下面我们来做一些更有意义的事：把老王介绍给计算机。</p>
<p>听起来怪怪的，我们先来做点稍微正常点的事，把老王介绍给楼上老赵先。</p>
<p>“老赵，早啊。这位是我的隔壁，叫老王。60年代的人，跟你差不多大，以后有人陪你下象棋了。”</p>
<p>嗯，这个介绍还算正常。</p>
<p>我们试着再迈出一步，把老王介绍给计算机。</p>
<p>这时，有一个问题出现了。老王是个人，但计算机并不知道人是个什么东西。首先，我们需要跟计算机解释人是什么。我们不需要严格的人的定义，而只要梳理一下人自身有哪些信息，可以做哪些事情就可以了。</p>
<p>人有名字，有出生年月，可以说话，可以写字，可以吃喝拉撒。</p>
<p>我们只要把这些规则简单地转化成代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span>               <span class="comment"># 定义人类</span></span><br><span class="line">    name = <span class="string">''</span>               <span class="comment"># 人类有名字</span></span><br><span class="line">    birthday = <span class="string">''</span>           <span class="comment"># 而且有生日</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">speak</span><span class="params">(self)</span>:</span>        <span class="comment"># 人类会说话</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">write</span><span class="params">(self)</span>:</span>        <span class="comment"># 会写字</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">trivia</span><span class="params">(self)</span>:</span>       <span class="comment"># 吃喝拉撒样样精通</span></span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>这里有几个新东西。<code>class</code> 意思是“定义一个类”。<code>pass</code> 是为了先占个位，我们在这里还不想涉及到 <code>说话</code> 的细节。</p>
<p>我们在这里看到了上一篇讲到的“功能”，这里的功能跟上一篇的“功能”并无二致。在执行这几个功能时，会传入一个 <code>self</code>，我们可以先暂时不予理会。</p>
<p>好了，现在计算机已经知道人类是个什么东西了，可以介绍老王了。</p>
<p>“老王是一个出生于1962年的老头。”</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mr_wang = Person()              <span class="comment"># 有一个人</span></span><br><span class="line">mr_wang.name = <span class="string">'老王'</span>           <span class="comment"># 他的名字叫“老王”</span></span><br><span class="line">mr_wang.birthday = <span class="string">'1962-10-13'</span> <span class="comment"># 出生于1962年10月17日</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> mr_wang.name              <span class="comment"># 打印老王的名字</span></span><br></pre></td></tr></table></figure>

<p>这时，计算机就知道老王是怎么一回事了。尽管有点明知顾问，我们最后还是打印了一下老王的名字，计算机显示了一个“老王”。</p>
<p>想获取老王的个人信息，使用这种方式就可以了：<code>mr_wang.name</code>，很简单，对吧？</p>
<h2 id="重新理解老王"><a href="#重新理解老王" class="headerlink" title="重新理解老王"></a>重新理解老王</h2><p>上面的解释很容易懂，但是有几一点没有说清楚。<code>mr_wang = Person()</code> 意思是“有一个人”？</p>
<p>很明显这是一个动作，而不是一种状态（有一个人）的描述。</p>
<p>为了更清楚地了解 <code>mr_wang = Person()</code> 的实际意义，我们来回想一下钥匙的制作过程：如果我们的钥匙丢了，要去重新配一把，来到配钥匙的地方，会发现老师傅那里有很多没齿的钥匙。这时，老师傅会根据我们那把正常钥匙的齿，来打磨一把新的钥匙给我们。<code>mr_wang = Person()</code> 就是取没齿的钥匙的过程。打磨的过程就是将一个对象的特殊性添加到这个对象中的过程。</p>
<p>也就是说，我们先从人这个类里生成一个新的人（没有姓名、没有生日），然后把老王的数据打磨到这个人里（具体化）。</p>
<h2 id="开口说话"><a href="#开口说话" class="headerlink" title="开口说话"></a>开口说话</h2><p>我们之前说人类可以说话，但上面这个例子并不能讲话。我们来修改一下代码，让老王可以自报家门：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">()</span>:</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">speak</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Hello, I'm"</span>, self.name</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">mr_wang.speak()</span><br></pre></td></tr></table></figure>

<p>为了方便说明，这里只显示了关键代码。我们实现了之前 <code>speak()</code> 功能里的 <code>pass</code> 部分，使用了之前使用过的 <code>print</code>。</p>
<p>这里有几点要说明：</p>
<ol>
<li><code>self</code> 是我们之前留下的小尾巴，现在可以清晰地看到，<code>self</code> 实际上是实例的别称。当我们通过 <code>mr_wang.speak()</code> 来使用 <code>speak()</code> 功能时，<code>self</code> 就是我们亲爱的老王。</li>
<li>我们发现，使用一个对象的功能，和使用一个对象属性形式一下，只是多了一个功能所特有的 <code>()</code>。</li>
</ol>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>需要说明一点的是，计算机中的类很少是用来分类的，因为大部分情况下，我们已经提前知道一个对象是人还是狗了。它主要是用来划分边界，让我们意识到，这个对象有哪些信息，可以做什么。</p>
<p>小结不应该太多废话，我们把之前的代码整理一下，看懂即可，<a href="/public/script/mr_wang.py">下载链接</a>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义人类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    name = <span class="string">''</span></span><br><span class="line">    birthday = <span class="string">''</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">speak</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Hello, I'm"</span>, self.name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">write</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">trivia</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 具体化一个人，并写入老王的信息</span></span><br><span class="line">mr_wang = Person()</span><br><span class="line">mr_wang.name = <span class="string">'老王'</span></span><br><span class="line">mr_wang.birthday = <span class="string">'1962-10-13'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 让老王开口说话</span></span><br><span class="line">mr_wang.speak()</span><br></pre></td></tr></table></figure>

<h2 id="尾注"><a href="#尾注" class="headerlink" title="尾注"></a>尾注</h2><p>嗯，到现在为止，我们已经忽略了很多不需要知道的细节。</p>
<p>但可能在实操的过程中，我们的好奇心没有停下来，也或者因为小手一抖敲错个空格，而让问题变得非常复杂。我的建议是，保存好有错误的代码，然后重新来过，毕竟到现在为止，长点的代码也不过20行。</p>
<p>错误都非常有价值，多犯不同的错误会让我们更有经验。当你完成了整篇文章的内容，就可以回过头来重新查看之前的错误了。询问旁边的人，或者借助互联网，都是不错的选择。</p>
<p>在完成一个重要的里程碑后，我们会重点整理一下之前最有可能产生误解的点。</p>
<p>最后，毫无疑问的是，如果你发现某一句话没看明白，或者实操时老出问题，那一定是我出问题了。请给我一个改正的机会。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://pysnow530.github.io/2017/03/25/python-class/" data-id="cle4am4ja001t6jiy3xygdar8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-the-abandoned-capital" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/23/the-abandoned-capital/" class="article-date">
  <time datetime="2017-03-22T16:00:00.000Z" itemprop="datePublished">2017-03-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/23/the-abandoned-capital/">读《废都》</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这是第二次读这本小说了，算是重温。</p>
<p>第一次读是在高中。那时去姨家玩，进了一个房间后，发现墙角有一个书框，密密麻麻地摆着好几排的书，想是堂哥平时慢慢积攒起来的。那时我并不喜欢阅读，就随便翻着看。翻到这本书时，看着书里的情节，面红耳赤，不能自已。</p>
<p>那时我十七八岁，正是情窦初开的年纪。</p>
<p>借这本书时，刚好堂哥不在，胆战心惊，怕被姨识破。我把书借回了家，仔细研读并温习着书中描写的场景。特别是读到“□□□”时（此处并非敏感词，原书中确为“□□□”），心中充满无限的想象。那份荷尔蒙急剧上升带来的怦然心动，一颗鲜红滚烫的心仿佛要脱离这个僵硬的躯壳。</p>
<p>所以想象力很重要。</p>
<p>就像冯唐讲他们在网络资源匮乏时，一个视频一传十十传百的刻录，最后模糊不清，也依然平静不下观看时的激动。最后乃至看到阳光下树影斑驳，下面都会不自觉地硬起来。</p>
<p>十年前，山东，盛夏的某个夜晚，我躲在被窝里，战战兢兢地抱着一本泛黄的纸书，虔诚得像一个圣徒，有作为生命最原始地憧憬与渴望。我读得兴奋，从外面远远地望过来，千家万户独一盏灯火通明，肯定更美。</p>
<p>一晃十年过去了，“十年生死两茫茫”。十年有可能是我生命的八分之一，五分之一，甚至是三分之一。</p>
<p>一席春梦了无痕。十年后，午后饭饱，阳光正好。人懒洋洋地坐在办公室的座椅上，旁若无人地拿着kindle，总觉得少了点什么。手里的这个版本，已经没有了当初的“□□□”，也不再有当时斟字酌句的心境。</p>
<p>不知再过他个十年二十年后，看到远处的灯火通明，是否还能一眼看出，那个曾经亲爱的自己。为之感动，为之神伤。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://pysnow530.github.io/2017/03/23/the-abandoned-capital/" data-id="cle4am4jm00366jiy5frs4295" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%98%85%E8%AF%BB/" rel="tag">阅读</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-class-again" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/19/class-again/" class="article-date">
  <time datetime="2017-03-18T16:00:00.000Z" itemprop="datePublished">2017-03-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/19/class-again/">上课走神</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>我记得之前的每一次考试，心里都会非常紧张，惟恐整个考试被自己搞砸。甚至多次被这样的梦境吓醒，梦中自己竟睁不开眼看试题。</p>
<p>我慢慢地在这样的紧张中，缩小自己心理的活动范围。</p>
<p>如今又做了这样一个梦，说不上是算昨天还是今天，这篇文章是一篇跨夜文章。</p>
<h2 id="梦"><a href="#梦" class="headerlink" title="梦"></a>梦</h2><p>梦里还是高中时候的同桌。</p>
<p>老师说：“你们先随便看看书吧。”像是地理书。</p>
<p>说完以后，我就开始自顾自地玩了。</p>
<p>过了一会，老师说，现在开始考查刚才让你们背诵的内容。</p>
<p>what???</p>
<p><img src="/public/img/fuyuanhui.png" alt="what"></p>
<p>逗我，啥时候让我们背诵了，不是说就随便看看吗？</p>
<p>更夸张的是，竟然是所有人挨个过去，他提问题我们回答。搞得更像是面试。</p>
<p>我的天，这是什么情况，我再一次慌了。</p>
<p>我前边的几个人挨个过去，都答的不错。</p>
<p>到我过去背诵，他先问我：“你觉得你背诵得怎么样？”</p>
<p>我说：“背得不是很好，尤其是后面。”</p>
<p>他一下子就怒了，怒了，说：“那还学什么了，我要把你开除”。</p>
<p>开除？我清晰地觉得这是在跟我说工作的事。</p>
<p>看到他在纸上写下开除两个字，我一下子就释然了。一个感觉是，你没权利开除我；第二个感觉是，开除我也不怕，又不是什么大不了的事。</p>
<h2 id="醒"><a href="#醒" class="headerlink" title="醒"></a>醒</h2><p>醒来后，我觉得自己很开心。多年的恐惧已经解除了。</p>
<p>也或许，我真的有了一定能力，可以理直气壮的说，我不怕失去。</p>
<p>我觉得我真正要害怕的是生命的失去。失去生命，意味着将不再有努力的机会。</p>
<p>而考试，或者老师布置的任务，并没有可以让我们害怕的因素。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://pysnow530.github.io/2017/03/19/class-again/" data-id="cle4am4ip000a6jiy8aqvc8w8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A2%A6/" rel="tag">梦</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-acceptable-life" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/18/acceptable-life/" class="article-date">
  <time datetime="2017-03-17T16:00:00.000Z" itemprop="datePublished">2017-03-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/18/acceptable-life/">可接受的生活环境</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>租住在现在的这个地方已经有3个年头了，却几乎没怎么主动打扫一下。</p>
<p>并非因为不是自己的房子感觉没必要，也不是因为平时工作忙没时间。就一个字，“懒”。</p>
<p>今天破天荒的打扫了一下厨房的卫生，大到物品的摆放，小到边边脚脚。用毛刷刷墙角也是很快乐的，不得不说，人类的这项发明非常之伟大。</p>
<p>说起打扫的原因，却是出奇的简单：我住的这个房子，厨房靠窗。春天来了，想打开窗子透透气，但一打开，外面的人就能看到里面的情景。想到这个，我立马就有点心虚。窗子还是要开的，怎么办呢？打扫一下卫生呗。</p>
<p>可不可以开窗，取决于一个条件，我管它叫做“可接受的生活环境”。即，我能不能接受把我的生活环境暴露给别人看。</p>
<p>说到可接受，有两种很极端的情况：</p>
<ol>
<li>虽然我房子脏，但是给别人看一下也无妨，毕竟我是活给自己的嘛。</li>
<li>这么脏的房子，怎么能给别人看到，除非打扫一下。</li>
</ol>
<p>我觉这两种情况都合情合理，所谓“知行合一”，只要自己跟“自己”想法一致，就不会在心里产生矛盾。</p>
<p>我选择了2，而且给了自己一个很好的理由：嗯，虽然你小子看起来挺懒的，但是并没有懒的无可救药，你还是想努力改变自己的。</p>
<p>“可接受的生活环境”其实是与懒惰抗争的一个好方法，有时候我们就是需要这种本无大意义的想法来刺激一下。当然，意义多大看个人。</p>
<p>“可接受的xxx”可以用在很多方面，比如，我们平日在家希望自己是一个什么形象呢？我们有可能希望接受的是，别人看到的我们的私生活是积极的，我们热爱生活，我们利用自己的时间学习烹饪、读书、运动、听音乐。</p>
<p>但是，私生活本来就是不活在别人的眼里呀，不然该活得多累。所以实际的情况可能是，我们热爱不正经的生活，我们看黄色小说、打飞机、睡懒觉、臭鞋臭袜子衣服满屋。</p>
<p>如果不用打开自己的生活给别人看，又觉得脏点乱点自己也可以逍遥快活，管它呢！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://pysnow530.github.io/2017/03/18/acceptable-life/" data-id="cle4am4in00056jiy565qdie3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%97%B2%E6%89%AF/" rel="tag">闲扯</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-python-function" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/18/python-function/" class="article-date">
  <time datetime="2017-03-17T16:00:00.000Z" itemprop="datePublished">2017-03-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/18/python-function/">唠唠python(5) -- 打包操作</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>这篇文章依然是承接自上一篇文章，来讲一讲上一章遗留下来的问题。</p>
</blockquote>
<blockquote>
<p>上一章我们讲到<code>int(raw_input(&#39;Tell me the quantity: &#39;))</code>是让计算机帮我们从用户那里获取一个数字，现在我们来看看它是如何做的。</p>
</blockquote>
<h2 id="洗衣机的智慧"><a href="#洗衣机的智慧" class="headerlink" title="洗衣机的智慧"></a>洗衣机的智慧</h2><p>对，我们先来谈一谈洗衣机。</p>
<p>我现在住的这个地方有点小，担心买了洗衣机更显局促，所以一直没买。但这不妨碍我们谈洗衣机的智慧。</p>
<p>如果现在还没有出现洗衣机这么个东西，设想我们渴望有一个机器，它可以帮我们(1)自动加水，(2)清洗衣物，(3)自动甩干，(4)自动烘干。</p>
<p>这么一大批动作，当然每个动作分别需要一个机器也是可以的，但是每一个动作人为介入，势必会降低我们的效率。怎么办呢？</p>
<p>哈哈，其实办法我们已经知道了，但还是要假装吃惊一下。啊？居然还有机器可以集成上面说到的全部功能，而且只需要在执行第一步前按一个按钮，接下来的四步自动依次完成，帮我们屏蔽了之前的细节。</p>
<p>这样的例子有很多，人类的智慧大大促进了人们生活水平的提高。</p>
<h2 id="洗衣机智慧在计算机语言中的妙用"><a href="#洗衣机智慧在计算机语言中的妙用" class="headerlink" title="洗衣机智慧在计算机语言中的妙用"></a>洗衣机智慧在<code>计算机语言</code>中的妙用</h2><p>刚刚我们谈了洗衣机的智慧，我们再进一步来谈一下，对我们来说，它到底意味着什么。</p>
<p>我们知道，光洗衣服这件小事，就涉及了非常多个工序。什么倒洗衣粉、搓洗衣服、拧干、晾晒，等了个等。像我们这种追求(zhi)生活(nan)品质(ai)的人，怎么能忍受得了这么变态的工序。</p>
<p>福音来了，现在你眼前的这个工具，只需要把衣物放进去，按下开关。二小时后，将衣物取出放进衣柜就可以万事大吉了。</p>
<p>为什么这么神奇，因为洗衣机帮我们把洗衣服的细节给屏蔽掉了。它把必须由我们来做的事（打开开关）暴露给我们（看得见的开关按钮），我们只需要打开开关，二小时后，它就会把结果（衣服洗完）给我们。</p>
<p>计算机语言也存在着类似的思想。</p>
<p>我们再拿之前提到的表格处理的例子，我们希望把表格中每个数字，按照某种规则处理完后写到其下面的表格，然后将处理后的表格保存到一个新文件。</p>
<p>假设我们有一台<code>表格洗衣机</code>，来达到上面的效果。我们假设这台<code>表格洗衣机</code>是洗衣机厂家生产的。我们不管厂家怎么制作出来的，也不管它怎么个洗法，我们的想法是，只要给这台<code>表格洗衣机</code>一个实际的数据表格（相当于洗衣机的开关）就可以了。它会把处理完后的表格给我们。</p>
<p><code>表格洗衣机</code>仍然有点抽象，但是实际上，我们在前面已经看过两个例子了。一个是<code>raw_input()</code>，一个是<code>int()</code>。</p>
<h2 id="raw-input-和int"><a href="#raw-input-和int" class="headerlink" title="raw_input()和int()"></a><code>raw_input()</code>和<code>int()</code></h2><p>现在，我们可以来讲讲之前遇到的<code>int(raw_input(&#39;Tell me the quantity: &#39;))</code>了。</p>
<p>这一坨长长的东西，可以等价到下面两句：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">quantity_str = raw_input(<span class="string">'Tell me the quantity: '</span>)</span><br><span class="line">quantity = int(quantity_str)</span><br></pre></td></tr></table></figure>

<p>我们对洗衣机说：“帮我洗一件衣服”。然后塞给它一件衣服，打开开关，它就轰隆隆地开动了。</p>
<p>当计算机读到<code>quantity_str = raw_input(&#39;Tell me the quantity: &#39;)</code>时，它跟用户说：“Tell me the quantity: ”，并将用户输入的文字写到<code>quantity_str</code>。</p>
<p><code>quantity_str</code>又是啥？我们可以把它想象成一个箱子，我们把计算机读到的用户输入的文字放到这个箱子里。</p>
<p>注意，这条语句是从右往左读的：“计算机显示Tell me the quantity，并把用户输入的文字放到<code>quantity_str</code>这个箱子里”。</p>
<p>现在我们知道了，<code>raw_input()</code>就是要计算机帮我们获得一段文字。具体怎么获得，我们不管，你（计算机）自己去想。</p>
<p><code>int()</code>也是一样的东西，它的功能是将某段文字（如<code>&quot;1234&quot;</code>）转换成一个整数。<code>int(quantity_str)</code>即，将我们<code>quantity_str</code>箱子里的文字转换成一个整数，并放到一个名为<code>quantity</code>的箱子。</p>
<p>为了更直观地感觉一下，我们来自己做一台”洗衣机”。</p>
<h2 id="更好的规则计算过程"><a href="#更好的规则计算过程" class="headerlink" title="更好的规则计算过程"></a>更好的规则计算过程</h2><p>之前的例子，我们写了一段代码来实现通过规则计算结果：<code>print (int(raw_input(&quot;Tell me the quantity: &quot;)) + (10000 - 1)) / 10000 * 10000</code>。</p>
<p>这一行代码有几个问题：</p>
<ol>
<li>首先，这一句非常长，而且里面有n个()，就算我们自己，也要用手一个括弧一个括弧地匹配。</li>
<li>其次，里面可能有多个中间结果，但我们没法查看中间结果的值。</li>
<li>再次，这段代码的自述性不好。也就是说，它不能表达自己在做什么。</li>
</ol>
<p>我们根据这三点，再利用前面提到的技术，来重新组织一下我们的语言：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">quantity_str = raw_input(<span class="string">"Tell me the quantity: "</span>)</span><br><span class="line">quantity = int(quantity_str)</span><br><span class="line">real_quantity = (quantity + (<span class="number">10000</span> - <span class="number">1</span>)) / <span class="number">10000</span> * <span class="number">10000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> real_quantity</span><br></pre></td></tr></table></figure>

<p>看上去代码量更多了，真的值得吗？</p>
<p>审视一下我们上面提到的三个问题，新的代码每行不再有大量的括弧，我们可以在第二行后插入<code>print quantity</code>来查看<code>quantity</code>的内容，而且我们很清晰地看到了我们要计算机做的每一步。作为一个简单的脚本，新的代码并没有什么吸引力。但当我们考虑到我们要把它做成一个完整的系统，至少在最后的系统面前，它是值得的。</p>
<p>考虑当我们的规则非常复杂时，我们就会有一个更好的选择，即上面所谈的洗衣机的智慧：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">compute_real_quantity</span><span class="params">(quantity)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> (quantity + (<span class="number">10000</span> - <span class="number">1</span>)) / <span class="number">10000</span> * <span class="number">10000</span></span><br><span class="line"></span><br><span class="line">quantity_str = raw_input(<span class="string">"Tell me the quantity: "</span>)</span><br><span class="line">quantity = int(quantity_str)</span><br><span class="line">real_quantity = compute_real_quantity(quantity)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> real_quantity</span><br></pre></td></tr></table></figure>

<p>哇噻，更长了，哈哈。</p>
<p>我们在这里，定义了一个类似<code>raw_input()</code>的功能，叫做<code>compute_real_quantity()</code>。定义方式就像看到的一样简单。我们再来定义一个加法功能说明，如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> 功能名称<span class="params">(需要输入哪些变量)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> 结果</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(m, n)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> m + n</span><br></pre></td></tr></table></figure>

<p>这里有一个好处，如果<code>compute_real_quantity()</code>是别人写的，我们就不需要知道规则的细节了。假如这个规则是你来写，我只需要把我的待采购的数量给你，你帮我计算一下实际需要的数量就好了。具体细节，我不关心。</p>
<h2 id="屏蔽细节让生活更轻松"><a href="#屏蔽细节让生活更轻松" class="headerlink" title="屏蔽细节让生活更轻松"></a>屏蔽细节让生活更轻松</h2><p>我们之前说游戏手柄的输入也非常简单，原因就在于这方面的专家已经帮我们屏蔽了细节。获取手柄的输入，跟获取<code>raw_input()</code>的输入大同小异。</p>
<p>类似的，从一个表格文件中获取输入跟<code>raw_input()</code>差别不大。我们会使用这一篇文章中讲到的技术及之后的少量新技术，来从表格文件中读取表格数据，处理完后，使用类似<code>print</code>的功能，将处理结果输出到新文件（而不是神秘的黑色窗口）。</p>
<p>明天你是否会想起？</p>
<p>不止明天，我哪一天都不想起。睡觉。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://pysnow530.github.io/2017/03/18/python-function/" data-id="cle4am4jd00236jiyf18r0vhn" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-work-is-comming" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/12/work-is-comming/" class="article-date">
  <time datetime="2017-03-11T16:00:00.000Z" itemprop="datePublished">2017-03-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/12/work-is-comming/">唠唠python(4) -- 简化工作</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>胜兵先胜而后求战，败兵先战而后求胜。 – 孙子兵法</p>
</blockquote>
<h2 id="遇到问题"><a href="#遇到问题" class="headerlink" title="遇到问题"></a>遇到问题</h2><p>我的女朋友最近生病了，周三下了班就回了家，顺带着还把在公司的一部分工作带了回来。</p>
<p>等我回到家，她已经卧在床上睡一觉了。</p>
<p>过了一会她睡醒了，坐起来跟我说：“工作没做完，你帮我做一下吧。很简单，就是把这张表格里的数字，以10000为单位，上或下取整，填到它下面的格子里。”说罢，就又睡了过去。</p>
<h2 id="怎么计算"><a href="#怎么计算" class="headerlink" title="怎么计算"></a>怎么计算</h2><p>我粗略地看了一眼，这是一个excel表格文件，就是下面的这张表格。</p>
<p><img src="/public/img/excel.png" alt="待处理表格"></p>
<p>简单查看了一下excel的基础知识。这一个一个的格子，叫作“单元格”，哈哈，形象吧。暂时我们只需要这个概念。</p>
<p>这里面有黑色内容的单元格和红色内容的单元格。红色内容的单元格是计算上面的黑色单元格的内容（物料的待收数据）得到的结果。</p>
<p>我们的目标是，输入这个文件，然后让计算机自己经过一系列的计算过程，将表格中的还未计算过的数据按给定的规则计算，将计算结果写到下面一个单元格，并帮我们把处理后表格保存下来。</p>
<p>这个目标实在激动人心！我跟我女朋友确认过，以这次的数据量，如果人工来做，可能需要花费3-4个小时的时间。而对计算机来说，在一分钟内就可以完成，而且可以确保结果的准确性。需要的知识也浅显易懂，如果对相关知识熟练，完全可以在半小时内将我们想要做的事情清楚地告诉计算机。</p>
<p>当然，学习是循序渐进的。在这篇文章中，我们先把目标降低一些：告诉计算机一个待收数量，和一条规则（以10000为单位上取整），让它帮我们计算实际的代收数量。这是我们完成整个目标的第一步，这个技巧也完全可以用在其它类似的工作上。</p>
<h2 id="获取输入"><a href="#获取输入" class="headerlink" title="获取输入"></a>获取输入</h2><p>首先，我们需要告诉计算机待收数量。这当然很简单，我们在前面已经说过了。假设待收数量是1234：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1234</span></span><br><span class="line"><span class="number">1234</span></span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<p>但是，这样会显得很仓促：1234代表什么呢？我们现在当然知道，它就是我们要求值的数据。但当我们写入到一个文件时，如何把1234传进去呢？</p>
<p>显然，我们可以直接写到文件，比如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> <span class="number">1234</span></span><br></pre></td></tr></table></figure>

<p>而此时，如果再重新输入一个数字时，我们就需要打开文件，然后把1234改为新的数字，保存文件，然后运行。修改代码文件很繁琐，而且是很危险的，这还只是一行简单的代码，想想，如果一个代码文件有上百行，我们如何再找到这个数值的位置？会不会小手一抖，把其它行的数据也修改了而自己并没有意识到？繁琐的操作也必然会降低我们的效率。</p>
<p>这时，我们就自然有这么一个需求。</p>
<p>计算机：您好，我最亲爱的某某某，您的待收数量是多少，我来为您计算实际待收数量。</p>
<p>亲爱的某某某：嗯，1234。</p>
<p>计算机：您实际需要待收的数量是10000。</p>
<p>嗯，这就是人们所说的交互，其实就是让人跟计算机的沟通像人与人的沟通一样顺畅。</p>
<p>这时，我们需要知道这么一个东西:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>int(raw_input(<span class="string">"请输入您的待收数量："</span>))</span><br><span class="line">请输入您的待收数量：<span class="number">1234</span></span><br><span class="line"><span class="number">1234</span></span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<p>注意，里面的第一个1234是我们自己输入的，后面还跟了一个回车。</p>
<p><code>int(raw_input(&quot;请输入您的待收数量：&quot;))</code>，这么大一坨？没关系，先死记下，在之后的文章我们会进一步了解。我们只需要知道，它让计算机询问我们待收数量。</p>
<h2 id="如何计算取整后的值"><a href="#如何计算取整后的值" class="headerlink" title="如何计算取整后的值"></a>如何计算取整后的值</h2><p>我们现在用的python是个死脑筋。为什么这么说呢？如果你使用的python是之前文章中链接的python或是系统默认安装的，试试下面这个：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> / <span class="number">2</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<p>我们在学校学到的可是<code>5 ÷ 2 = 2.5</code>，现在却得到个2。谁的问题？</p>
<p>语言的问题。语言是有局限的，而当我们输入<code>5 / 2</code>时，python解释给计算机说：“请帮我们计算一下<code>5 ÷ 2</code>的值，取整就可以了，小数点我们就不要了。</p>
<p>语言是在发展的，文章中用的python版本是python2，此时，默认情况下，整数除法的结果是整数，而且是下取整。</p>
<p>现在回到我们的问题：给一个数字，以10000为单位，上取整或下取整。我们假设是上取整，想想应该怎么做呢？</p>
<p>我们把单位缩小，先来看一下以3为单位上取整，我们来取一批数值观察一下。</p>
<p>我们来分别观察一下 <code>待收数量</code>、<code>实收数量</code> 的值和它们之间的相互关系格式：</p>
<ul>
<li>待收数量：<code>1</code>，实收数量：<code>3</code>，待收数量 ÷ 3后下取整：<code>0</code></li>
<li>待收数量：<code>2</code>，实收数量：<code>3</code>，待收数量 ÷ 3后下取整：<code>0</code></li>
<li>待收数量：<code>3</code>，实收数量：<code>3</code>，待收数量 ÷ 3后下取整：<code>1</code></li>
<li>待收数量：<code>4</code>，实收数量：<code>6</code>，待收数量 ÷ 3后下取整：<code>1</code></li>
<li>待收数量：<code>5</code>，实收数量：<code>6</code>，待收数量 ÷ 3后下取整：<code>1</code></li>
<li>待收数量：<code>6</code>，实收数量：<code>6</code>，待收数量 ÷ 3后下取整：<code>2</code></li>
<li>待收数量：<code>7</code>，实收数量：<code>9</code>，待收数量 ÷ 3后下取整：<code>2</code></li>
<li>待收数量：<code>8</code>，实收数量：<code>9</code>，待收数量 ÷ 3后下取整：<code>2</code></li>
<li>待收数量：<code>9</code>，实收数量：<code>9</code>，待收数量 ÷ 3后下取整：<code>3</code></li>
<li>…</li>
</ul>
<p>我们发现，<code>待收数量 ÷ 3后下取整</code> 的值会随着 <code>实收数量</code> 增长，但并不完全一致，而是相差 <code>2</code>。如果在 <code>÷ 3</code> 前先将 <code>待收数量</code> +2，则结果刚好变成了3倍的关系。如下：</p>
<ul>
<li>待收数量：<code>1</code>，实收数量：<code>3</code>，(待收数量 + 2) ÷ 3后下取整：<code>1</code></li>
<li>待收数量：<code>2</code>，实收数量：<code>3</code>，(待收数量 + 2) ÷ 3后下取整：<code>1</code></li>
<li>待收数量：<code>3</code>，实收数量：<code>3</code>，(待收数量 + 2) ÷ 3后下取整：<code>1</code></li>
<li>待收数量：<code>4</code>，实收数量：<code>6</code>，(待收数量 + 2) ÷ 3后下取整：<code>2</code></li>
<li>待收数量：<code>5</code>，实收数量：<code>6</code>，(待收数量 + 2) ÷ 3后下取整：<code>2</code></li>
<li>待收数量：<code>6</code>，实收数量：<code>6</code>，(待收数量 + 2) ÷ 3后下取整：<code>2</code></li>
<li>待收数量：<code>7</code>，实收数量：<code>9</code>，(待收数量 + 2) ÷ 3后下取整：<code>3</code></li>
<li>待收数量：<code>8</code>，实收数量：<code>9</code>，(待收数量 + 2) ÷ 3后下取整：<code>3</code></li>
<li>待收数量：<code>9</code>，实收数量：<code>9</code>，(待收数量 + 2) ÷ 3后下取整：<code>3</code></li>
<li>…</li>
</ul>
<p>也就是说，<code>实收数量</code> 刚好是 <code>(待收数量 + 2) ÷ 3后下取整</code>的3倍，其中的 <code>2</code> 实际上就是由 <code>3 - 1</code> 得来的。我们用数学公式整理一下现在的这个想法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">实收数量</span><br><span class="line">&#x3D; (待收数量 + 2) &#x2F; 3 * 3</span><br><span class="line">&#x3D; (待收数量 + (3 - 1)) &#x2F; 3 * 3</span><br></pre></td></tr></table></figure>

<p>注意，其中的 <code>/</code> 符号即我们python语言里的除法，它是下取整的。</p>
<p>类比到10000时的情形，我们的公式会变成下面这个样子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">实收数量 &#x3D; (待收数量 + (10000 - 1)) &#x2F; 3 * 3</span><br></pre></td></tr></table></figure>

<p>实际上，如果我们可以让计算机整数相除时上取整（而不是下取整），公式就会变得异常简单：<code>n 上取整除以 10000 * 10000</code>，在我们学习了后面的更多知识后就可以做到。现在这个公式<code>(n + (10000 - 1)) / 10000 * 10000</code>虽繁琐，但已是我们通过自己仅有的一点计算机知识所能学到的了。</p>
<h2 id="马儿跑起来"><a href="#马儿跑起来" class="headerlink" title="马儿跑起来"></a>马儿跑起来</h2><p>下面，我们将之前的分析总结到一个文本文件里：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> <span class="number">10000</span> * (n + (<span class="number">10000</span> - <span class="number">1</span>)) / <span class="number">10000</span></span><br></pre></td></tr></table></figure>

<p>将n替换为提示用户输入待收数量：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> (int(raw_input(<span class="string">"Tell me the quantity: "</span>)) + (<span class="number">10000</span> - <span class="number">1</span>)) / <span class="number">10000</span> * <span class="number">10000</span></span><br></pre></td></tr></table></figure>

<p>将以上内容保存到a.py，然后输入<code>python a.py</code>并回车，试试看：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ python a.py</span><br><span class="line">Tell me the quantity: 1234</span><br><span class="line">10000</span><br></pre></td></tr></table></figure>

<p>嗯，不错，可以。</p>
<h2 id="一点遗憾"><a href="#一点遗憾" class="headerlink" title="一点遗憾"></a>一点遗憾</h2><p>这是我们迈出的很重要的一点，如果你跟下来并且看懂了，这说明我们已经掌握了<code>把自己的思想描述给计算机</code>的技巧。</p>
<p>但这还不完美，离我们的目标<code>自动处理数据并保存结果</code>还是有一定距离的。多远的距离呢，嗯，可能是4-5篇文章吧。不算远，对吧，假定一篇文章40分钟，加起来也就是3-4个小时的样子。想想我们前面提到的，这些数据手工处理都要3-4个小时，太他妈赚了。</p>
<p>当然，3-4个小时是不够的，我们还需要一些时间消化和遗忘。不过，不管怎么算，这都是人生中很成功的一笔交易。</p>
<p>这篇文章中，还有很多有趣的东西被我一带而过了，留到下一篇我们再一起聊聊吧。</p>
<p>已经晚上23了，洗洗睡了。明天又是崭新的一天，啊哈哈。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://pysnow530.github.io/2017/03/12/work-is-comming/" data-id="cle4am4jp003j6jiy6vh3fwc8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/4/">« Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/6/">Next »</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/celery/" rel="tag">celery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/django/" rel="tag">django</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/emacs/" rel="tag">emacs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fabric/" rel="tag">fabric</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/golang/" rel="tag">golang</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gtd/" rel="tag">gtd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iostat/" rel="tag">iostat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jekyll/" rel="tag">jekyll</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jetbrains/" rel="tag">jetbrains</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lisp/" rel="tag">lisp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/open-falcon/" rel="tag">open-falcon</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/org-mode/" rel="tag">org-mode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/paramiko/" rel="tag">paramiko</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ruby/" rel="tag">ruby</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/top/" rel="tag">top</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/" rel="tag">vuejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wsgi/" rel="tag">wsgi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zabbix/" rel="tag">zabbix</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" rel="tag">分布式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%88%91%E7%9A%84%E4%B8%96%E7%95%8C/" rel="tag">我的世界</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%88%E7%8E%87/" rel="tag">效率</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A2%A6/" rel="tag">梦</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%B7%E9%87%8F%E8%BF%90%E7%BB%B4/" rel="tag">海量运维</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B8%B8%E6%88%8F/" rel="tag">游戏</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BC%94%E8%AE%B2/" rel="tag">演讲</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9B%91%E6%8E%A7%E5%91%8A%E8%AD%A6/" rel="tag">监控告警</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" rel="tag">编程语言</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E8%BE%91%E5%99%A8/" rel="tag">编辑器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA/" rel="tag">计算机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%A8%A1%E6%8B%9F/" rel="tag">计算机模拟</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%97%B2%E6%89%AF/" rel="tag">闲扯</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%98%85%E8%AF%BB/" rel="tag">阅读</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%98%85%E8%AF%BB%E5%99%A8/" rel="tag">阅读器</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/celery/" style="font-size: 10px;">celery</a> <a href="/tags/django/" style="font-size: 14px;">django</a> <a href="/tags/emacs/" style="font-size: 16px;">emacs</a> <a href="/tags/fabric/" style="font-size: 10px;">fabric</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/golang/" style="font-size: 10px;">golang</a> <a href="/tags/gtd/" style="font-size: 12px;">gtd</a> <a href="/tags/hexo/" style="font-size: 12px;">hexo</a> <a href="/tags/iostat/" style="font-size: 10px;">iostat</a> <a href="/tags/jekyll/" style="font-size: 10px;">jekyll</a> <a href="/tags/jetbrains/" style="font-size: 10px;">jetbrains</a> <a href="/tags/linux/" style="font-size: 12px;">linux</a> <a href="/tags/lisp/" style="font-size: 10px;">lisp</a> <a href="/tags/open-falcon/" style="font-size: 12px;">open-falcon</a> <a href="/tags/org-mode/" style="font-size: 10px;">org-mode</a> <a href="/tags/paramiko/" style="font-size: 10px;">paramiko</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/ruby/" style="font-size: 10px;">ruby</a> <a href="/tags/top/" style="font-size: 10px;">top</a> <a href="/tags/vuejs/" style="font-size: 10px;">vuejs</a> <a href="/tags/wsgi/" style="font-size: 10px;">wsgi</a> <a href="/tags/zabbix/" style="font-size: 10px;">zabbix</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 10px;">分布式</a> <a href="/tags/%E6%88%91%E7%9A%84%E4%B8%96%E7%95%8C/" style="font-size: 10px;">我的世界</a> <a href="/tags/%E6%95%88%E7%8E%87/" style="font-size: 10px;">效率</a> <a href="/tags/%E6%A2%A6/" style="font-size: 14px;">梦</a> <a href="/tags/%E6%B5%B7%E9%87%8F%E8%BF%90%E7%BB%B4/" style="font-size: 10px;">海量运维</a> <a href="/tags/%E6%B8%B8%E6%88%8F/" style="font-size: 10px;">游戏</a> <a href="/tags/%E6%BC%94%E8%AE%B2/" style="font-size: 10px;">演讲</a> <a href="/tags/%E7%9B%91%E6%8E%A7%E5%91%8A%E8%AD%A6/" style="font-size: 14px;">监控告警</a> <a href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" style="font-size: 12px;">编程语言</a> <a href="/tags/%E7%BC%96%E8%BE%91%E5%99%A8/" style="font-size: 10px;">编辑器</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA/" style="font-size: 10px;">计算机</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%A8%A1%E6%8B%9F/" style="font-size: 10px;">计算机模拟</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 10px;">设计模式</a> <a href="/tags/%E9%97%B2%E6%89%AF/" style="font-size: 16px;">闲扯</a> <a href="/tags/%E9%98%85%E8%AF%BB/" style="font-size: 18px;">阅读</a> <a href="/tags/%E9%98%85%E8%AF%BB%E5%99%A8/" style="font-size: 10px;">阅读器</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/02/14/hexo-generate-empty-file/">hexo generate生成文件为空，已解决</a>
          </li>
        
          <li>
            <a href="/2021/05/05/2021-05-05-massive-distributed-operation/">海量分布式运维差异</a>
          </li>
        
          <li>
            <a href="/2021/01/17/20210117-org-mode-again/">org-mode again</a>
          </li>
        
          <li>
            <a href="/2020/11/14/doggy/">狗子</a>
          </li>
        
          <li>
            <a href="/2020/11/08/thinking-of-standing/">站着的碎想</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 pysnow530@163.com<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-LRCLK447MR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-LRCLK447MR');
  </script>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>